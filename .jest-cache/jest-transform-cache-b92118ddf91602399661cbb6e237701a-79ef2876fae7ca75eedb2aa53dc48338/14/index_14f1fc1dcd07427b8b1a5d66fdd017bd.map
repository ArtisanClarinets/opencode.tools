{"file":"/app/agents/research/index.ts","mappings":";AAAA,+FAA+F;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqB/F,sCAgCC;AAnDD,uCAAyB;AACzB,qDAAiD;AAajD;;;;GAIG;AACI,KAAK,UAAU,aAAa,CAAC,eAAuB;IACvD,IAAI,KAAoB,CAAC;IAEzB,IAAI,CAAC;QACD,gCAAgC;QAChC,IAAI,EAAE,CAAC,UAAU,CAAC,eAAe,CAAC,IAAI,EAAE,CAAC,SAAS,CAAC,eAAe,CAAC,CAAC,MAAM,EAAE,EAAE,CAAC;YAC3E,MAAM,OAAO,GAAG,EAAE,CAAC,YAAY,CAAC,eAAe,EAAE,OAAO,CAAC,CAAC;YAC1D,wDAAwD;YACxD,MAAM,MAAM,GAAG,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC;YACnC,IAAI,MAAM,CAAC,KAAK,EAAE,CAAC;gBACf,KAAK,GAAG,MAAM,CAAC;YACnB,CAAC;iBAAM,CAAC;gBACJ,sCAAsC;gBACtC,KAAK,GAAG,EAAE,KAAK,EAAE,MAAM,EAAE,CAAC;YAC9B,CAAC;QACL,CAAC;aAAM,CAAC;YACJ,6BAA6B;YAC7B,MAAM,MAAM,GAAG,IAAI,CAAC,KAAK,CAAC,eAAe,CAAC,CAAC;YAC3C,IAAI,MAAM,CAAC,KAAK,EAAE,CAAC;gBACf,KAAK,GAAG,MAAM,CAAC;YACnB,CAAC;iBAAM,CAAC;gBACJ,KAAK,GAAG,EAAE,KAAK,EAAE,MAAM,EAAE,CAAC;YAC9B,CAAC;QACL,CAAC;IACL,CAAC;IAAC,OAAO,KAAK,EAAE,CAAC;QACb,OAAO,CAAC,KAAK,CAAC,8BAA8B,EAAE,KAAK,CAAC,CAAC;QACrD,MAAM,IAAI,KAAK,CAAC,6FAA6F,CAAC,CAAC;IACnH,CAAC;IAED,MAAM,KAAK,GAAG,IAAI,8BAAa,EAAE,CAAC;IAClC,OAAO,CAAC,GAAG,CAAC,yBAAyB,KAAK,CAAC,KAAK,CAAC,OAAO,KAAK,CAAC,CAAC;IAC/D,OAAO,MAAM,KAAK,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC;AACtC,CAAC;AAED,qDAAqD","names":[],"sources":["/app/agents/research/index.ts"],"sourcesContent":["// C:\\Users\\drpt0\\iCloudDrive\\Developer\\Projects\\Active\\opencode.tools\\agents\\research\\index.ts\n\nimport * as fs from 'fs';\nimport { ResearchAgent } from './research-agent';\nimport { ResearchInput, ResearchOutput } from './types';\n\n// Kept for backward compatibility if needed, but gatherDossier now returns ResearchOutput\nexport interface Dossier {\n    summary: string;\n    competitors: string[];\n    constraints: string[];\n    opportunities: string[];\n    rawSources: string[];\n    markdown: string;\n}\n\n/**\n * Orchestrates research using the ResearchAgent.\n * @param briefPathOrJson The client brief as a JSON string or path to a JSON file.\n * @returns A structured Research Output.\n */\nexport async function gatherDossier(briefPathOrJson: string): Promise<ResearchOutput> {\n    let input: ResearchInput;\n\n    try {\n        // Check if input is a file path\n        if (fs.existsSync(briefPathOrJson) && fs.lstatSync(briefPathOrJson).isFile()) {\n            const content = fs.readFileSync(briefPathOrJson, 'utf-8');\n            // If the file contains the full ResearchInput structure\n            const parsed = JSON.parse(content);\n            if (parsed.brief) {\n                input = parsed;\n            } else {\n                // If the file is just the ClientBrief\n                input = { brief: parsed };\n            }\n        } else {\n            // Try parsing as JSON string\n            const parsed = JSON.parse(briefPathOrJson);\n            if (parsed.brief) {\n                input = parsed;\n            } else {\n                input = { brief: parsed };\n            }\n        }\n    } catch (error) {\n        console.error(\"Failed to parse input brief:\", error);\n        throw new Error(\"Invalid input: Must be a valid JSON string or path to a JSON file containing a ClientBrief.\");\n    }\n\n    const agent = new ResearchAgent();\n    console.log(`Starting research for ${input.brief.company}...`);\n    return await agent.execute(input);\n}\n\n// CLI Entry Point removed to enforce TUI-only access\n"],"version":3}