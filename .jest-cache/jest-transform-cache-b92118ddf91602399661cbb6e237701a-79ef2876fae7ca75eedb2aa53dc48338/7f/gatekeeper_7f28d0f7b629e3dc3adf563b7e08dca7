6ae4a36e5dac16c07062960fb179fe96
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.ResearchGatekeeper = void 0;
class ResearchGatekeeper {
    constructor(minSources = 3, minDomains = 2) {
        this.minSources = minSources;
        this.minDomains = minDomains;
    }
    evaluate(sources) {
        const reasons = [];
        let score = 0;
        // Check count
        if (sources.length >= this.minSources) {
            score += 0.5;
        }
        else {
            reasons.push(`Insufficient sources: ${sources.length}/${this.minSources}`);
        }
        // Check domain diversity
        const domains = new Set(sources.map(s => {
            try {
                return new URL(s.url).hostname;
            }
            catch {
                return 'unknown';
            }
        }));
        if (domains.size >= this.minDomains) {
            score += 0.5;
        }
        else {
            reasons.push(`Insufficient domain diversity: ${domains.size}/${this.minDomains}`);
        }
        const passed = reasons.length === 0;
        return {
            passed,
            score,
            reasons
        };
    }
}
exports.ResearchGatekeeper = ResearchGatekeeper;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL2FwcC9zcmMvZ292ZXJuYW5jZS9nYXRla2VlcGVyLnRzIiwibWFwcGluZ3MiOiI7OztBQVFBLE1BQWEsa0JBQWtCO0lBSTdCLFlBQVksYUFBcUIsQ0FBQyxFQUFFLGFBQXFCLENBQUM7UUFDeEQsSUFBSSxDQUFDLFVBQVUsR0FBRyxVQUFVLENBQUM7UUFDN0IsSUFBSSxDQUFDLFVBQVUsR0FBRyxVQUFVLENBQUM7SUFDL0IsQ0FBQztJQUVELFFBQVEsQ0FBQyxPQUFpQjtRQUN4QixNQUFNLE9BQU8sR0FBYSxFQUFFLENBQUM7UUFDN0IsSUFBSSxLQUFLLEdBQUcsQ0FBQyxDQUFDO1FBRWQsY0FBYztRQUNkLElBQUksT0FBTyxDQUFDLE1BQU0sSUFBSSxJQUFJLENBQUMsVUFBVSxFQUFFLENBQUM7WUFDdEMsS0FBSyxJQUFJLEdBQUcsQ0FBQztRQUNmLENBQUM7YUFBTSxDQUFDO1lBQ04sT0FBTyxDQUFDLElBQUksQ0FBQyx5QkFBeUIsT0FBTyxDQUFDLE1BQU0sSUFBSSxJQUFJLENBQUMsVUFBVSxFQUFFLENBQUMsQ0FBQztRQUM3RSxDQUFDO1FBRUQseUJBQXlCO1FBQ3pCLE1BQU0sT0FBTyxHQUFHLElBQUksR0FBRyxDQUFDLE9BQU8sQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLEVBQUU7WUFDdEMsSUFBSSxDQUFDO2dCQUNILE9BQU8sSUFBSSxHQUFHLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLFFBQVEsQ0FBQztZQUNqQyxDQUFDO1lBQUMsTUFBTSxDQUFDO2dCQUNQLE9BQU8sU0FBUyxDQUFDO1lBQ25CLENBQUM7UUFDSCxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBRUosSUFBSSxPQUFPLENBQUMsSUFBSSxJQUFJLElBQUksQ0FBQyxVQUFVLEVBQUUsQ0FBQztZQUNwQyxLQUFLLElBQUksR0FBRyxDQUFDO1FBQ2YsQ0FBQzthQUFNLENBQUM7WUFDTixPQUFPLENBQUMsSUFBSSxDQUFDLGtDQUFrQyxPQUFPLENBQUMsSUFBSSxJQUFJLElBQUksQ0FBQyxVQUFVLEVBQUUsQ0FBQyxDQUFDO1FBQ3BGLENBQUM7UUFFRCxNQUFNLE1BQU0sR0FBRyxPQUFPLENBQUMsTUFBTSxLQUFLLENBQUMsQ0FBQztRQUVwQyxPQUFPO1lBQ0wsTUFBTTtZQUNOLEtBQUs7WUFDTCxPQUFPO1NBQ1IsQ0FBQztJQUNKLENBQUM7Q0FDRjtBQTNDRCxnREEyQ0MiLCJuYW1lcyI6W10sInNvdXJjZXMiOlsiL2FwcC9zcmMvZ292ZXJuYW5jZS9nYXRla2VlcGVyLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFNvdXJjZSB9IGZyb20gJy4uLy4uL2FnZW50cy9yZXNlYXJjaC90eXBlcyc7XG5cbmV4cG9ydCBpbnRlcmZhY2UgR2F0ZWtlZXBlclJlc3VsdCB7XG4gIHBhc3NlZDogYm9vbGVhbjtcbiAgc2NvcmU6IG51bWJlcjtcbiAgcmVhc29uczogc3RyaW5nW107XG59XG5cbmV4cG9ydCBjbGFzcyBSZXNlYXJjaEdhdGVrZWVwZXIge1xuICBwcml2YXRlIG1pblNvdXJjZXM6IG51bWJlcjtcbiAgcHJpdmF0ZSBtaW5Eb21haW5zOiBudW1iZXI7XG5cbiAgY29uc3RydWN0b3IobWluU291cmNlczogbnVtYmVyID0gMywgbWluRG9tYWluczogbnVtYmVyID0gMikge1xuICAgIHRoaXMubWluU291cmNlcyA9IG1pblNvdXJjZXM7XG4gICAgdGhpcy5taW5Eb21haW5zID0gbWluRG9tYWlucztcbiAgfVxuXG4gIGV2YWx1YXRlKHNvdXJjZXM6IFNvdXJjZVtdKTogR2F0ZWtlZXBlclJlc3VsdCB7XG4gICAgY29uc3QgcmVhc29uczogc3RyaW5nW10gPSBbXTtcbiAgICBsZXQgc2NvcmUgPSAwO1xuXG4gICAgLy8gQ2hlY2sgY291bnRcbiAgICBpZiAoc291cmNlcy5sZW5ndGggPj0gdGhpcy5taW5Tb3VyY2VzKSB7XG4gICAgICBzY29yZSArPSAwLjU7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJlYXNvbnMucHVzaChgSW5zdWZmaWNpZW50IHNvdXJjZXM6ICR7c291cmNlcy5sZW5ndGh9LyR7dGhpcy5taW5Tb3VyY2VzfWApO1xuICAgIH1cblxuICAgIC8vIENoZWNrIGRvbWFpbiBkaXZlcnNpdHlcbiAgICBjb25zdCBkb21haW5zID0gbmV3IFNldChzb3VyY2VzLm1hcChzID0+IHtcbiAgICAgIHRyeSB7XG4gICAgICAgIHJldHVybiBuZXcgVVJMKHMudXJsKS5ob3N0bmFtZTtcbiAgICAgIH0gY2F0Y2gge1xuICAgICAgICByZXR1cm4gJ3Vua25vd24nO1xuICAgICAgfVxuICAgIH0pKTtcblxuICAgIGlmIChkb21haW5zLnNpemUgPj0gdGhpcy5taW5Eb21haW5zKSB7XG4gICAgICBzY29yZSArPSAwLjU7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJlYXNvbnMucHVzaChgSW5zdWZmaWNpZW50IGRvbWFpbiBkaXZlcnNpdHk6ICR7ZG9tYWlucy5zaXplfS8ke3RoaXMubWluRG9tYWluc31gKTtcbiAgICB9XG5cbiAgICBjb25zdCBwYXNzZWQgPSByZWFzb25zLmxlbmd0aCA9PT0gMDtcblxuICAgIHJldHVybiB7XG4gICAgICBwYXNzZWQsXG4gICAgICBzY29yZSxcbiAgICAgIHJlYXNvbnNcbiAgICB9O1xuICB9XG59XG4iXSwidmVyc2lvbiI6M30=