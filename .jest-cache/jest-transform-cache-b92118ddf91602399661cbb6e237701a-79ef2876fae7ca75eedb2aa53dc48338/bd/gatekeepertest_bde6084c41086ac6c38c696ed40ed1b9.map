{"file":"/app/tests/unit/governance/gatekeeper.test.ts","mappings":";;AAAA,mEAAwE;AAExE,QAAQ,CAAC,oBAAoB,EAAE,GAAG,EAAE;IAClC,IAAI,UAA8B,CAAC;IAEnC,UAAU,CAAC,GAAG,EAAE;QACd,UAAU,GAAG,IAAI,+BAAkB,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;IAC5C,CAAC,CAAC,CAAC;IAEH,EAAE,CAAC,qDAAqD,EAAE,GAAG,EAAE;QAC7D,MAAM,OAAO,GAAG;YACd,EAAE,GAAG,EAAE,uBAAuB,EAAE,KAAK,EAAE,GAAG,EAAE,SAAS,EAAE,MAAM,EAAE,UAAU,EAAE,KAAK,EAAE;YAClF,EAAE,GAAG,EAAE,uBAAuB,EAAE,KAAK,EAAE,GAAG,EAAE,SAAS,EAAE,MAAM,EAAE,UAAU,EAAE,KAAK,EAAE;YAClF,EAAE,GAAG,EAAE,qBAAqB,EAAE,KAAK,EAAE,GAAG,EAAE,SAAS,EAAE,MAAM,EAAE,UAAU,EAAE,KAAK,EAAE;SACjF,CAAC;QAEF,MAAM,MAAM,GAAG,UAAU,CAAC,QAAQ,CAAC,OAAO,CAAC,CAAC;QAC5C,MAAM,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QACjC,MAAM,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;IACjC,CAAC,CAAC,CAAC;IAEH,EAAE,CAAC,2CAA2C,EAAE,GAAG,EAAE;QACnD,MAAM,OAAO,GAAG;YACd,EAAE,GAAG,EAAE,uBAAuB,EAAE,KAAK,EAAE,GAAG,EAAE,SAAS,EAAE,MAAM,EAAE,UAAU,EAAE,KAAK,EAAE;SACnF,CAAC;QAEF,MAAM,MAAM,GAAG,UAAU,CAAC,QAAQ,CAAC,OAAO,CAAC,CAAC;QAC5C,MAAM,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;QAClC,MAAM,CAAC,MAAM,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,QAAQ,CAAC,sBAAsB,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;IAClF,CAAC,CAAC,CAAC;IAEH,EAAE,CAAC,mDAAmD,EAAE,GAAG,EAAE;QAC3D,MAAM,OAAO,GAAG;YACd,EAAE,GAAG,EAAE,uBAAuB,EAAE,KAAK,EAAE,GAAG,EAAE,SAAS,EAAE,MAAM,EAAE,UAAU,EAAE,KAAK,EAAE;YAClF,EAAE,GAAG,EAAE,uBAAuB,EAAE,KAAK,EAAE,GAAG,EAAE,SAAS,EAAE,MAAM,EAAE,UAAU,EAAE,KAAK,EAAE;YAClF,EAAE,GAAG,EAAE,uBAAuB,EAAE,KAAK,EAAE,GAAG,EAAE,SAAS,EAAE,MAAM,EAAE,UAAU,EAAE,KAAK,EAAE;SACnF,CAAC;QAEF,MAAM,MAAM,GAAG,UAAU,CAAC,QAAQ,CAAC,OAAO,CAAC,CAAC;QAC5C,MAAM,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;QAClC,MAAM,CAAC,MAAM,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,QAAQ,CAAC,+BAA+B,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;IAC3F,CAAC,CAAC,CAAC;AACL,CAAC,CAAC,CAAC","names":[],"sources":["/app/tests/unit/governance/gatekeeper.test.ts"],"sourcesContent":["import { ResearchGatekeeper } from '../../../src/governance/gatekeeper';\n\ndescribe('ResearchGatekeeper', () => {\n  let gatekeeper: ResearchGatekeeper;\n\n  beforeEach(() => {\n    gatekeeper = new ResearchGatekeeper(3, 2);\n  });\n\n  it('should pass when sources and domains are sufficient', () => {\n    const sources = [\n      { url: 'https://example.com/1', title: '1', relevance: 'High', accessedAt: 'now' },\n      { url: 'https://example.com/2', title: '2', relevance: 'High', accessedAt: 'now' },\n      { url: 'https://other.com/1', title: '3', relevance: 'High', accessedAt: 'now' }\n    ];\n\n    const result = gatekeeper.evaluate(sources);\n    expect(result.passed).toBe(true);\n    expect(result.score).toBe(1.0);\n  });\n\n  it('should fail when sources are insufficient', () => {\n    const sources = [\n      { url: 'https://example.com/1', title: '1', relevance: 'High', accessedAt: 'now' }\n    ];\n\n    const result = gatekeeper.evaluate(sources);\n    expect(result.passed).toBe(false);\n    expect(result.reasons.some(r => r.includes('Insufficient sources'))).toBe(true);\n  });\n\n  it('should fail when domain diversity is insufficient', () => {\n    const sources = [\n      { url: 'https://example.com/1', title: '1', relevance: 'High', accessedAt: 'now' },\n      { url: 'https://example.com/2', title: '2', relevance: 'High', accessedAt: 'now' },\n      { url: 'https://example.com/3', title: '3', relevance: 'High', accessedAt: 'now' }\n    ];\n\n    const result = gatekeeper.evaluate(sources);\n    expect(result.passed).toBe(false);\n    expect(result.reasons.some(r => r.includes('Insufficient domain diversity'))).toBe(true);\n  });\n});\n"],"version":3}