{"file":"/app/agents/research/index.ts","mappings":"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","names":[],"sources":["/app/agents/research/index.ts"],"sourcesContent":["// C:\\Users\\drpt0\\iCloudDrive\\Developer\\Projects\\Active\\opencode.tools\\agents\\research\\index.ts\n\nimport * as fs from 'fs';\nimport * as path from 'path';\nimport { ResearchAgent } from './research-agent';\nimport { ResearchInput, ResearchOutput } from './types';\n\n// Kept for backward compatibility if needed, but gatherDossier now returns ResearchOutput\nexport interface Dossier {\n    summary: string;\n    competitors: string[];\n    constraints: string[];\n    opportunities: string[];\n    rawSources: string[];\n    markdown: string;\n}\n\n/**\n * Orchestrates research using the ResearchAgent.\n * @param briefPathOrJson The client brief as a JSON string or path to a JSON file.\n * @returns A structured Research Output.\n */\nexport async function gatherDossier(briefPathOrJson: string): Promise<ResearchOutput> {\n    let input: ResearchInput;\n\n    try {\n        // Check if input is a file path\n        if (fs.existsSync(briefPathOrJson) && fs.lstatSync(briefPathOrJson).isFile()) {\n            const content = fs.readFileSync(briefPathOrJson, 'utf-8');\n            // If the file contains the full ResearchInput structure\n            const parsed = JSON.parse(content);\n            if (parsed.brief) {\n                input = parsed;\n            } else {\n                // If the file is just the ClientBrief\n                input = { brief: parsed };\n            }\n        } else {\n            // Try parsing as JSON string\n            const parsed = JSON.parse(briefPathOrJson);\n            if (parsed.brief) {\n                input = parsed;\n            } else {\n                input = { brief: parsed };\n            }\n        }\n    } catch (error) {\n        console.error(\"Failed to parse input brief:\", error);\n        throw new Error(\"Invalid input: Must be a valid JSON string or path to a JSON file containing a ClientBrief.\");\n    }\n\n    const agent = new ResearchAgent();\n    console.log(`Starting research for ${input.brief.company}...`);\n    return await agent.execute(input);\n}\n\n// CLI Entry Point\nif (require.main === module) {\n    const args = process.argv.slice(2);\n    if (args.length < 1) {\n        console.error(\"Usage: ts-node agents/research/index.ts <path-to-brief-json>\");\n        process.exit(1);\n    }\n\n    const briefPath = args[0];\n    gatherDossier(briefPath)\n        .then(output => {\n            console.log(JSON.stringify(output, null, 2));\n            \n            // Optionally save to file if --output is provided\n            const outputIndex = args.indexOf('--output');\n            if (outputIndex !== -1 && args[outputIndex + 1]) {\n                const outputPath = args[outputIndex + 1];\n                fs.writeFileSync(outputPath, JSON.stringify(output, null, 2));\n                console.log(`Output saved to ${outputPath}`);\n            }\n        })\n        .catch(err => {\n            console.error(\"Research failed:\", err);\n            process.exit(1);\n        });\n}\n"],"version":3}