{"file":"/app/tests/unit/database/database.test.ts","mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,2DAA6D;AAC7D,uCAAyB;AAEzB,QAAQ,CAAC,cAAc,EAAE,GAAG,EAAE;IAC5B,MAAM,OAAO,GAAG,WAAW,CAAC;IAC5B,IAAI,EAAgB,CAAC;IAErB,SAAS,CAAC,GAAG,EAAE;QACb,IAAI,EAAE,CAAC,UAAU,CAAC,OAAO,CAAC,EAAE,CAAC;YACzB,EAAE,CAAC,MAAM,CAAC,OAAO,EAAE,EAAE,SAAS,EAAE,IAAI,EAAE,KAAK,EAAE,IAAI,EAAE,CAAC,CAAC;QACzD,CAAC;IACH,CAAC,CAAC,CAAC;IAEH,QAAQ,CAAC,GAAG,EAAE;QACZ,IAAI,EAAE,CAAC,UAAU,CAAC,OAAO,CAAC,EAAE,CAAC;YACzB,EAAE,CAAC,MAAM,CAAC,OAAO,EAAE,EAAE,SAAS,EAAE,IAAI,EAAE,KAAK,EAAE,IAAI,EAAE,CAAC,CAAC;QACzD,CAAC;IACH,CAAC,CAAC,CAAC;IAEH,EAAE,CAAC,mCAAmC,EAAE,KAAK,IAAI,EAAE;QACjD,EAAE,GAAG,IAAI,sBAAY,CAAC,OAAO,CAAC,CAAC;QAC/B,MAAM,MAAM,GAAG;YACb,EAAE,EAAE,QAAQ;YACZ,KAAK,EAAE,YAAY;YACnB,MAAM,EAAE,aAAsB;YAC9B,SAAS,EAAE,IAAI,IAAI,EAAE,CAAC,WAAW,EAAE;YACnC,QAAQ,EAAE,EAAE;SACb,CAAC;QAEF,MAAM,EAAE,CAAC,YAAY,CAAC,MAAM,CAAC,CAAC;QAC9B,MAAM,SAAS,GAAG,MAAM,EAAE,CAAC,WAAW,CAAC,QAAQ,CAAC,CAAC;QACjD,MAAM,CAAC,SAAS,CAAC,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC;IACpC,CAAC,CAAC,CAAC;AACL,CAAC,CAAC,CAAC","names":[],"sources":["/app/tests/unit/database/database.test.ts"],"sourcesContent":["import { JsonDatabase } from '../../../src/database/json-db';\nimport * as fs from 'fs';\n\ndescribe('JsonDatabase', () => {\n  const testDir = 'test-data';\n  let db: JsonDatabase;\n\n  beforeAll(() => {\n    if (fs.existsSync(testDir)) {\n        fs.rmSync(testDir, { recursive: true, force: true });\n    }\n  });\n\n  afterAll(() => {\n    if (fs.existsSync(testDir)) {\n        fs.rmSync(testDir, { recursive: true, force: true });\n    }\n  });\n\n  it('should save and retrieve research', async () => {\n    db = new JsonDatabase(testDir);\n    const record = {\n      id: 'test-1',\n      topic: 'Test Topic',\n      status: 'in_progress' as const,\n      startedAt: new Date().toISOString(),\n      findings: []\n    };\n\n    await db.saveResearch(record);\n    const retrieved = await db.getResearch('test-1');\n    expect(retrieved).toEqual(record);\n  });\n});\n"],"version":3}