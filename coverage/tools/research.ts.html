
<!doctype html>
<html lang="en">

<head>
    <title>Code coverage report for tools/research.ts</title>
    <meta charset="utf-8" />
    <link rel="stylesheet" href="../prettify.css" />
    <link rel="stylesheet" href="../base.css" />
    <link rel="shortcut icon" type="image/x-icon" href="../favicon.png" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <style type='text/css'>
        .coverage-summary .sorter {
            background-image: url(../sort-arrow-sprite.png);
        }
    </style>
</head>
    
<body>
<div class='wrapper'>
    <div class='pad1'>
        <h1><a href="../index.html">All files</a> / <a href="index.html">tools</a> research.ts</h1>
        <div class='clearfix'>
            
            <div class='fl pad1y space-right2'>
                <span class="strong">0% </span>
                <span class="quiet">Statements</span>
                <span class='fraction'>0/77</span>
            </div>
        
            
            <div class='fl pad1y space-right2'>
                <span class="strong">0% </span>
                <span class="quiet">Branches</span>
                <span class='fraction'>0/19</span>
            </div>
        
            
            <div class='fl pad1y space-right2'>
                <span class="strong">0% </span>
                <span class="quiet">Functions</span>
                <span class='fraction'>0/10</span>
            </div>
        
            
            <div class='fl pad1y space-right2'>
                <span class="strong">0% </span>
                <span class="quiet">Lines</span>
                <span class='fraction'>0/75</span>
            </div>
        
            
        </div>
        <p class="quiet">
            Press <em>n</em> or <em>j</em> to go to the next uncovered block, <em>b</em>, <em>p</em> or <em>k</em> for the previous block.
        </p>
        <template id="filterTemplate">
            <div class="quiet">
                Filter:
                <input type="search" id="fileSearch">
            </div>
        </template>
    </div>
    <div class='status-line low'></div>
    <pre><table class="coverage">
<tr><td class="line-count quiet"><a name='L1'></a><a href='#L1'>1</a>
<a name='L2'></a><a href='#L2'>2</a>
<a name='L3'></a><a href='#L3'>3</a>
<a name='L4'></a><a href='#L4'>4</a>
<a name='L5'></a><a href='#L5'>5</a>
<a name='L6'></a><a href='#L6'>6</a>
<a name='L7'></a><a href='#L7'>7</a>
<a name='L8'></a><a href='#L8'>8</a>
<a name='L9'></a><a href='#L9'>9</a>
<a name='L10'></a><a href='#L10'>10</a>
<a name='L11'></a><a href='#L11'>11</a>
<a name='L12'></a><a href='#L12'>12</a>
<a name='L13'></a><a href='#L13'>13</a>
<a name='L14'></a><a href='#L14'>14</a>
<a name='L15'></a><a href='#L15'>15</a>
<a name='L16'></a><a href='#L16'>16</a>
<a name='L17'></a><a href='#L17'>17</a>
<a name='L18'></a><a href='#L18'>18</a>
<a name='L19'></a><a href='#L19'>19</a>
<a name='L20'></a><a href='#L20'>20</a>
<a name='L21'></a><a href='#L21'>21</a>
<a name='L22'></a><a href='#L22'>22</a>
<a name='L23'></a><a href='#L23'>23</a>
<a name='L24'></a><a href='#L24'>24</a>
<a name='L25'></a><a href='#L25'>25</a>
<a name='L26'></a><a href='#L26'>26</a>
<a name='L27'></a><a href='#L27'>27</a>
<a name='L28'></a><a href='#L28'>28</a>
<a name='L29'></a><a href='#L29'>29</a>
<a name='L30'></a><a href='#L30'>30</a>
<a name='L31'></a><a href='#L31'>31</a>
<a name='L32'></a><a href='#L32'>32</a>
<a name='L33'></a><a href='#L33'>33</a>
<a name='L34'></a><a href='#L34'>34</a>
<a name='L35'></a><a href='#L35'>35</a>
<a name='L36'></a><a href='#L36'>36</a>
<a name='L37'></a><a href='#L37'>37</a>
<a name='L38'></a><a href='#L38'>38</a>
<a name='L39'></a><a href='#L39'>39</a>
<a name='L40'></a><a href='#L40'>40</a>
<a name='L41'></a><a href='#L41'>41</a>
<a name='L42'></a><a href='#L42'>42</a>
<a name='L43'></a><a href='#L43'>43</a>
<a name='L44'></a><a href='#L44'>44</a>
<a name='L45'></a><a href='#L45'>45</a>
<a name='L46'></a><a href='#L46'>46</a>
<a name='L47'></a><a href='#L47'>47</a>
<a name='L48'></a><a href='#L48'>48</a>
<a name='L49'></a><a href='#L49'>49</a>
<a name='L50'></a><a href='#L50'>50</a>
<a name='L51'></a><a href='#L51'>51</a>
<a name='L52'></a><a href='#L52'>52</a>
<a name='L53'></a><a href='#L53'>53</a>
<a name='L54'></a><a href='#L54'>54</a>
<a name='L55'></a><a href='#L55'>55</a>
<a name='L56'></a><a href='#L56'>56</a>
<a name='L57'></a><a href='#L57'>57</a>
<a name='L58'></a><a href='#L58'>58</a>
<a name='L59'></a><a href='#L59'>59</a>
<a name='L60'></a><a href='#L60'>60</a>
<a name='L61'></a><a href='#L61'>61</a>
<a name='L62'></a><a href='#L62'>62</a>
<a name='L63'></a><a href='#L63'>63</a>
<a name='L64'></a><a href='#L64'>64</a>
<a name='L65'></a><a href='#L65'>65</a>
<a name='L66'></a><a href='#L66'>66</a>
<a name='L67'></a><a href='#L67'>67</a>
<a name='L68'></a><a href='#L68'>68</a>
<a name='L69'></a><a href='#L69'>69</a>
<a name='L70'></a><a href='#L70'>70</a>
<a name='L71'></a><a href='#L71'>71</a>
<a name='L72'></a><a href='#L72'>72</a>
<a name='L73'></a><a href='#L73'>73</a>
<a name='L74'></a><a href='#L74'>74</a>
<a name='L75'></a><a href='#L75'>75</a>
<a name='L76'></a><a href='#L76'>76</a>
<a name='L77'></a><a href='#L77'>77</a>
<a name='L78'></a><a href='#L78'>78</a>
<a name='L79'></a><a href='#L79'>79</a>
<a name='L80'></a><a href='#L80'>80</a>
<a name='L81'></a><a href='#L81'>81</a>
<a name='L82'></a><a href='#L82'>82</a>
<a name='L83'></a><a href='#L83'>83</a>
<a name='L84'></a><a href='#L84'>84</a>
<a name='L85'></a><a href='#L85'>85</a>
<a name='L86'></a><a href='#L86'>86</a>
<a name='L87'></a><a href='#L87'>87</a>
<a name='L88'></a><a href='#L88'>88</a>
<a name='L89'></a><a href='#L89'>89</a>
<a name='L90'></a><a href='#L90'>90</a>
<a name='L91'></a><a href='#L91'>91</a>
<a name='L92'></a><a href='#L92'>92</a>
<a name='L93'></a><a href='#L93'>93</a>
<a name='L94'></a><a href='#L94'>94</a>
<a name='L95'></a><a href='#L95'>95</a>
<a name='L96'></a><a href='#L96'>96</a>
<a name='L97'></a><a href='#L97'>97</a>
<a name='L98'></a><a href='#L98'>98</a>
<a name='L99'></a><a href='#L99'>99</a>
<a name='L100'></a><a href='#L100'>100</a>
<a name='L101'></a><a href='#L101'>101</a>
<a name='L102'></a><a href='#L102'>102</a>
<a name='L103'></a><a href='#L103'>103</a>
<a name='L104'></a><a href='#L104'>104</a>
<a name='L105'></a><a href='#L105'>105</a>
<a name='L106'></a><a href='#L106'>106</a>
<a name='L107'></a><a href='#L107'>107</a>
<a name='L108'></a><a href='#L108'>108</a>
<a name='L109'></a><a href='#L109'>109</a>
<a name='L110'></a><a href='#L110'>110</a>
<a name='L111'></a><a href='#L111'>111</a>
<a name='L112'></a><a href='#L112'>112</a>
<a name='L113'></a><a href='#L113'>113</a>
<a name='L114'></a><a href='#L114'>114</a>
<a name='L115'></a><a href='#L115'>115</a>
<a name='L116'></a><a href='#L116'>116</a>
<a name='L117'></a><a href='#L117'>117</a>
<a name='L118'></a><a href='#L118'>118</a>
<a name='L119'></a><a href='#L119'>119</a>
<a name='L120'></a><a href='#L120'>120</a>
<a name='L121'></a><a href='#L121'>121</a>
<a name='L122'></a><a href='#L122'>122</a>
<a name='L123'></a><a href='#L123'>123</a>
<a name='L124'></a><a href='#L124'>124</a>
<a name='L125'></a><a href='#L125'>125</a>
<a name='L126'></a><a href='#L126'>126</a>
<a name='L127'></a><a href='#L127'>127</a>
<a name='L128'></a><a href='#L128'>128</a>
<a name='L129'></a><a href='#L129'>129</a>
<a name='L130'></a><a href='#L130'>130</a>
<a name='L131'></a><a href='#L131'>131</a>
<a name='L132'></a><a href='#L132'>132</a>
<a name='L133'></a><a href='#L133'>133</a>
<a name='L134'></a><a href='#L134'>134</a>
<a name='L135'></a><a href='#L135'>135</a>
<a name='L136'></a><a href='#L136'>136</a>
<a name='L137'></a><a href='#L137'>137</a>
<a name='L138'></a><a href='#L138'>138</a>
<a name='L139'></a><a href='#L139'>139</a>
<a name='L140'></a><a href='#L140'>140</a>
<a name='L141'></a><a href='#L141'>141</a>
<a name='L142'></a><a href='#L142'>142</a>
<a name='L143'></a><a href='#L143'>143</a>
<a name='L144'></a><a href='#L144'>144</a>
<a name='L145'></a><a href='#L145'>145</a>
<a name='L146'></a><a href='#L146'>146</a>
<a name='L147'></a><a href='#L147'>147</a>
<a name='L148'></a><a href='#L148'>148</a>
<a name='L149'></a><a href='#L149'>149</a>
<a name='L150'></a><a href='#L150'>150</a>
<a name='L151'></a><a href='#L151'>151</a>
<a name='L152'></a><a href='#L152'>152</a>
<a name='L153'></a><a href='#L153'>153</a>
<a name='L154'></a><a href='#L154'>154</a>
<a name='L155'></a><a href='#L155'>155</a>
<a name='L156'></a><a href='#L156'>156</a>
<a name='L157'></a><a href='#L157'>157</a>
<a name='L158'></a><a href='#L158'>158</a>
<a name='L159'></a><a href='#L159'>159</a>
<a name='L160'></a><a href='#L160'>160</a>
<a name='L161'></a><a href='#L161'>161</a>
<a name='L162'></a><a href='#L162'>162</a>
<a name='L163'></a><a href='#L163'>163</a>
<a name='L164'></a><a href='#L164'>164</a>
<a name='L165'></a><a href='#L165'>165</a>
<a name='L166'></a><a href='#L166'>166</a>
<a name='L167'></a><a href='#L167'>167</a>
<a name='L168'></a><a href='#L168'>168</a>
<a name='L169'></a><a href='#L169'>169</a>
<a name='L170'></a><a href='#L170'>170</a>
<a name='L171'></a><a href='#L171'>171</a>
<a name='L172'></a><a href='#L172'>172</a>
<a name='L173'></a><a href='#L173'>173</a>
<a name='L174'></a><a href='#L174'>174</a>
<a name='L175'></a><a href='#L175'>175</a>
<a name='L176'></a><a href='#L176'>176</a>
<a name='L177'></a><a href='#L177'>177</a>
<a name='L178'></a><a href='#L178'>178</a>
<a name='L179'></a><a href='#L179'>179</a>
<a name='L180'></a><a href='#L180'>180</a>
<a name='L181'></a><a href='#L181'>181</a>
<a name='L182'></a><a href='#L182'>182</a>
<a name='L183'></a><a href='#L183'>183</a>
<a name='L184'></a><a href='#L184'>184</a>
<a name='L185'></a><a href='#L185'>185</a>
<a name='L186'></a><a href='#L186'>186</a>
<a name='L187'></a><a href='#L187'>187</a>
<a name='L188'></a><a href='#L188'>188</a>
<a name='L189'></a><a href='#L189'>189</a>
<a name='L190'></a><a href='#L190'>190</a>
<a name='L191'></a><a href='#L191'>191</a>
<a name='L192'></a><a href='#L192'>192</a>
<a name='L193'></a><a href='#L193'>193</a>
<a name='L194'></a><a href='#L194'>194</a>
<a name='L195'></a><a href='#L195'>195</a>
<a name='L196'></a><a href='#L196'>196</a>
<a name='L197'></a><a href='#L197'>197</a>
<a name='L198'></a><a href='#L198'>198</a>
<a name='L199'></a><a href='#L199'>199</a>
<a name='L200'></a><a href='#L200'>200</a>
<a name='L201'></a><a href='#L201'>201</a>
<a name='L202'></a><a href='#L202'>202</a>
<a name='L203'></a><a href='#L203'>203</a>
<a name='L204'></a><a href='#L204'>204</a>
<a name='L205'></a><a href='#L205'>205</a>
<a name='L206'></a><a href='#L206'>206</a>
<a name='L207'></a><a href='#L207'>207</a>
<a name='L208'></a><a href='#L208'>208</a>
<a name='L209'></a><a href='#L209'>209</a>
<a name='L210'></a><a href='#L210'>210</a>
<a name='L211'></a><a href='#L211'>211</a></td><td class="line-coverage quiet"><span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span></td><td class="text"><pre class="prettyprint lang-js">// tools/research.ts
import { ClaimsGraph, Claim, EvidencePassage, Source, CitationAnalysis } from '../src/types/research';
<span class="cstat-no" title="statement not covered" >import { logToolCall } from './audit'; </span>// Assuming relative path for stub tools
<span class="cstat-no" title="statement not covered" >import { normalizeSource } from './source-normalize';</span>
&nbsp;
const RUN_ID = <span class="cstat-no" title="statement not covered" >'mock-run-123';</span> // Hardcoded for stub purposes
&nbsp;
/**
 * PhD-level Research Agent Tool Suite
 */
&nbsp;
// B1: Evidence-first research architecture
<span class="cstat-no" title="statement not covered" >export a</span>sync function <span class="fstat-no" title="function not covered" >plan(</span>brief: string): Promise&lt;{ questions: string[]; hypotheses: string[] }&gt; {
    // Advanced Logic Stub: Use LLM to decompose the brief into granular, verifiable questions.
    const questions = <span class="cstat-no" title="statement not covered" >[</span>
        "What is the primary market share of the client's top competitor?",
        "What are the major regulatory constraints (e.g., HIPAA, GDPR) applicable to the project domain?",
        "What evidence is required to confirm the 'build vs buy' hypothesis for the authentication system?"
    ];
    const hypotheses = <span class="cstat-no" title="statement not covered" >[</span>
        "The current competitor advantage is based on pricing, not feature set.",
        "A COTS authentication solution is faster and cheaper than a custom build."
    ];
<span class="cstat-no" title="statement not covered" >    await logToolCall(RUN_ID, 'research.plan', { brief }, { questions, hypotheses });</span>
<span class="cstat-no" title="statement not covered" >    return { questions, hypotheses };</span>
}
&nbsp;
<span class="cstat-no" title="statement not covered" >export a</span>sync function <span class="fstat-no" title="function not covered" >gather(</span>query: string, sources: { url: string }[]): Promise&lt;{ normalizedEvidence: { source: Source; content: string; }[] }&gt; {
    // Stub: This function would coordinate webfetch/search, rate-limit, and source-normalize.
<span class="cstat-no" title="statement not covered" >    console.log(`[Research.gather] Executing complex search plan for: ${query}. Tracing all fetches.`);</span>
    
    const normalizedEvidence: { source: Source; content: string }[] = <span class="cstat-no" title="statement not covered" >[];</span>
    
<span class="cstat-no" title="statement not covered" >    for (const s of sources) {</span>
        // Step 1: Simulated webfetch + audit
        const rawContent = <span class="cstat-no" title="statement not covered" >`&lt;html&gt;Raw HTML content from ${s.url} containing claims related to ${query}. The source claims Competitor X has 45% market share.&lt;/html&gt;`;</span>
<span class="cstat-no" title="statement not covered" >        await logToolCall(RUN_ID, 'webfetch', { url: s.url }, { rawContent: rawContent.substring(0, 50) + '...' });</span>
        
        // Step 2: Source Normalization (A5)
        const normalizeResult = <span class="cstat-no" title="statement not covered" >await normalizeSource(rawContent, s.url);</span>
        const normalizedData = <span class="cstat-no" title="statement not covered" >JSON.parse(normalizeResult.content);</span>
        
        // Simulated Source creation based on normalized data
        const source: Source = <span class="cstat-no" title="statement not covered" >{</span>
            url: s.url,
            canonicalUrl: normalizedData.canonicalUrl,
            contentHash: normalizedData.contentHash,
            domainAuthorityScore: s.url.includes('gov') ? 0.9 : 0.5,
            recencyScore: 0.9,
            isPrimarySource: s.url.includes('report')
        };
&nbsp;
<span class="cstat-no" title="statement not covered" >        normalizedEvidence.push({ source, content: normalizedData.cleanText });</span>
    }
&nbsp;
<span class="cstat-no" title="statement not covered" >    await logToolCall(RUN_ID, 'research.gather', { query, sources: sources.map(<span class="fstat-no" title="function not covered" >s </span>=&gt; <span class="cstat-no" title="statement not covered" >s.url)</span> }, { count: normalizedEvidence.length });</span>
<span class="cstat-no" title="statement not covered" >    return { normalizedEvidence };</span>
}
&nbsp;
// B1: Claim graph
<span class="cstat-no" title="statement not covered" >export a</span>sync function <span class="fstat-no" title="function not covered" >extractClaims(</span>normalizedEvidence: { source: Source; content: string }[], originalQuestions: string[]): Promise&lt;ClaimsGraph&gt; {
    // PhD-Level Logic Stub:
    // 1. Chunking and embedding of normalized content.
    // 2. Semantic clustering of passages to find recurring themes (potential claims).
    // 3. Extractive summarization to generate canonical claim text.
    // 4. Traceability: Each Claim MUST attach to at least one EvidencePassage.
&nbsp;
    const claims: Claim[] = <span class="cstat-no" title="statement not covered" >[];</span>
    const evidencePassages: EvidencePassage[] = <span class="cstat-no" title="statement not covered" >[{</span>
        sourceUrl: normalizedEvidence[0].source.url,
        text: 'The market share of Competitor X is 45%, a strong consensus view, verified by official reports.',
        textOffset: 100,
        confidenceScore: 0.95
    }];
    
<span class="cstat-no" title="statement not covered" >    claims.push({</span>
        id: 'claim-1',
        text: 'Competitor X holds a 45% market share in the target industry.',
        sentiment: 'neutral',
        confidenceLabel: 'high',
        evidence: evidencePassages,
        contradictions: []
    });
&nbsp;
    // Enforcement: The 'Synthesis' step (finalizeDossier) is STRICTLY LIMITED to claims in this graph.
<span class="cstat-no" title="statement not covered" >    await logToolCall(RUN_ID, 'research.claims.extract', { evidenceCount: normalizedEvidence.length }, { claimCount: claims.length });</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >    return {</span>
        questions: originalQuestions,
        hypotheses: [{ text: "Hypothesis A", status: 'confirmed' }],
        claims: claims,
        unsupportedClaims: [] 
    };
}
&nbsp;
// B2, B3: Citation correctness, Contradiction + consensus analysis
<span class="cstat-no" title="statement not covered" >export a</span>sync function <span class="fstat-no" title="function not covered" >analyzeCitations(</span>claimsGraph: ClaimsGraph): Promise&lt;CitationAnalysis&gt; {
    // PhD-Level Logic Stub:
    // 1. Contradiction/Consensus: Rerank claims based on opposing evidence. Use an LLM to compare semantically clustered evidence passages to detect refutation/support.
    // 2. Citation Quality: Check Primary/Secondary, Recency, and Domain Authority.
&nbsp;
    const analysis: CitationAnalysis = <span class="cstat-no" title="statement not covered" >{</span>
        totalClaims: claimsGraph.claims.length,
        supportedClaims: claimsGraph.claims.length,
        unsupportedClaims: [],
        consensusSummary: [],
        weakSources: []
    };
    
    const sourceMap = <span class="cstat-no" title="statement not covered" >new Map&lt;string, Source&gt;();</span>
<span class="cstat-no" title="statement not covered" >    claimsGraph.claims.forEach(<span class="fstat-no" title="function not covered" >c </span>=&gt; <span class="cstat-no" title="statement not covered" >c.evidence.forEach(<span class="fstat-no" title="function not covered" >e </span>=&gt; {</span></span>
        // In a real flow, Source metadata would be retrieved from a database/cache here
<span class="cstat-no" title="statement not covered" >        <span class="missing-if-branch" title="if path not taken" >I</span>if (!sourceMap.has(e.sourceUrl)) {</span>
<span class="cstat-no" title="statement not covered" >             sourceMap.set(e.sourceUrl, { </span>
                url: e.sourceUrl, 
                canonicalUrl: e.sourceUrl.toLowerCase(), 
                contentHash: 'mock-hash-1',
                domainAuthorityScore: e.sourceUrl.includes('gov') ? 0.9 : 0.3,
                recencyScore: 0.8,
                isPrimarySource: e.sourceUrl.includes('report')
            });
        }
    }));
&nbsp;
<span class="cstat-no" title="statement not covered" >    for (const claim of claimsGraph.claims) {</span>
        // --- Citation Required Enforcement (G1) ---
<span class="cstat-no" title="statement not covered" >        <span class="missing-if-branch" title="if path not taken" >I</span>if (claim.evidence.length === 0) {</span>
<span class="cstat-no" title="statement not covered" >            analysis.unsupportedClaims.push(claim);</span>
<span class="cstat-no" title="statement not covered" >            continue;</span>
        }
&nbsp;
        // --- Contradiction &amp; Consensus Analysis (B3) ---
<span class="cstat-no" title="statement not covered" >        if (claim.contradictions.length &gt; 0) {</span>
<span class="cstat-no" title="statement not covered" >            claim.confidenceLabel = 'low';</span>
<span class="cstat-no" title="statement not covered" >            analysis.consensusSummary.push({</span>
                claimId: claim.id,
                consensusView: claim.text,
                minorityView: `Conflicting evidence found in ${claim.contradictions[0].sourceUrl}`
            });
        } else <span class="cstat-no" title="statement not covered" >if (claim.evidence.length === 1) {</span>
             // Single source = medium confidence unless source is a high-authority primary source
<span class="cstat-no" title="statement not covered" >            claim.confidenceLabel = 'medium';</span>
        } else {
<span class="cstat-no" title="statement not covered" >            claim.confidenceLabel = 'high';</span>
        }
&nbsp;
        // --- Citation Quality Scoring (B2) ---
<span class="cstat-no" title="statement not covered" >        claim.evidence.forEach(<span class="fstat-no" title="function not covered" >e </span>=&gt; {</span>
            const source = <span class="cstat-no" title="statement not covered" >sourceMap.get(e.sourceUrl);</span>
<span class="cstat-no" title="statement not covered" >            <span class="missing-if-branch" title="if path not taken" >I</span>if (source &amp;&amp; source.domainAuthorityScore &lt; 0.5 &amp;&amp; !source.isPrimarySource) {</span>
<span class="cstat-no" title="statement not covered" >                analysis.weakSources.push(source);</span>
            }
        });
    }
&nbsp;
<span class="cstat-no" title="statement not covered" >    await logToolCall(RUN_ID, 'research.citations.analyze', { totalClaims: claimsGraph.claims.length }, { unsupportedCount: analysis.unsupportedClaims.length, weakSourceCount: analysis.weakSources.length });</span>
<span class="cstat-no" title="statement not covered" >    return analysis;</span>
}
&nbsp;
// B4: Peer review system
<span class="cstat-no" title="statement not covered" >export a</span>sync function <span class="fstat-no" title="function not covered" >peerReview(</span>dossier: any, reviewer: 'Methodology' | 'Citation' | 'Adversarial' | 'ExecutiveEditor'): Promise&lt;{ notes: string; rubricScore: number; requiredRevisions: string[] }&gt; {
    // Advanced Logic Stub: Simulates a structured review process.
    let notes = <span class="cstat-no" title="statement not covered" >`Review by ${reviewer} complete.`;</span>
    let rubricScore = <span class="cstat-no" title="statement not covered" >0;</span>
    let requiredRevisions: string[] = <span class="cstat-no" title="statement not covered" >[];</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >    switch (reviewer) {</span>
        case 'Methodology':
<span class="cstat-no" title="statement not covered" >            notes = "Checked alignment with initial plan. Coverage is good, but pricing angle is weak.";</span>
<span class="cstat-no" title="statement not covered" >            rubricScore = 4;</span>
<span class="cstat-no" title="statement not covered" >            requiredRevisions = ["Expand search to include 'competitor X pricing strategy' for better coverage."];</span>
<span class="cstat-no" title="statement not covered" >            break;</span>
        case 'Citation':
<span class="cstat-no" title="statement not covered" >            notes = "All claims have evidence. Weak sources flagged for follow-up, but no outright unsupported claims.";</span>
<span class="cstat-no" title="statement not covered" >            rubricScore = 5;</span>
<span class="cstat-no" title="statement not covered" >            break;</span>
        case 'Adversarial':
<span class="cstat-no" title="statement not covered" >            notes = "Attempted to falsify Claim 1 by searching for 'Competitor X market share decline' - no refuting evidence found. Conclusion is robust.";</span>
<span class="cstat-no" title="statement not covered" >            rubricScore = 5;</span>
<span class="cstat-no" title="statement not covered" >            break;</span>
        case 'ExecutiveEditor':
<span class="cstat-no" title="statement not covered" >            notes = "Dossier structure is clear, concise, and actionable. Ready for final client review. Must ensure delivery of 'recommendedDiscoveryQuestions'.";</span>
<span class="cstat-no" title="statement not covered" >            rubricScore = 5;</span>
<span class="cstat-no" title="statement not covered" >            break;</span>
    }
&nbsp;
<span class="cstat-no" title="statement not covered" >    await logToolCall(RUN_ID, 'research.peer_review', { reviewer }, { rubricScore, revisionCount: requiredRevisions.length });</span>
<span class="cstat-no" title="statement not covered" >    return { notes, rubricScore, requiredRevisions };</span>
}
&nbsp;
// B5: Research deliverables
<span class="cstat-no" title="statement not covered" >export a</span>sync function <span class="fstat-no" title="function not covered" >finalizeDossier(</span>claimGraph: ClaimsGraph, analysis: CitationAnalysis): Promise&lt;{ dossier: string; deliverables: any }&gt; {
    // Synthesis Stub: Dossier written *only* from the ClaimsGraph and Analysis results. (B1: Evidence-first enforcement)
    
    // Check G1 policy gate: No unsupported claims allowed.
<span class="cstat-no" title="statement not covered" >    <span class="missing-if-branch" title="if path not taken" >I</span>if (analysis.unsupportedClaims.length &gt; 0) {</span>
<span class="cstat-no" title="statement not covered" >        throw new Error("G1 Policy Violation: Dossier cannot be finalized with unsupported claims.");</span>
    }
    
    const dossier = <span class="cstat-no" title="statement not covered" >`# Research Dossier: Project X Findings (Final Version)\n\n## Key Findings (Derived from Claims Graph)\n\n*   **Claim 1:** ${claimGraph.claims[0].text} (Confidence: ${claimGraph.claims[0].confidenceLabel}).\n\n## Conclusion\n\n-   Confidence is HIGH. All claims supported. Governance check passed.\n`;</span>
&nbsp;
    const deliverables = <span class="cstat-no" title="statement not covered" >{</span>
        competitorMatrix: { /* ... */ },
        pricingInference: { model: 'TBD', clearlyLabeled: 'INFERENCE' },
        regulatoryMemo: { HIPAA: 'Low relevance', PCI: 'High relevance' },
        recommendedDiscoveryQuestions: ["Is the 45% market share based on revenue or user count?"],
    };
    
<span class="cstat-no" title="statement not covered" >    await logToolCall(RUN_ID, 'research.dossier.finalize', { status: 'Success' }, { dossierHash: 'dossier-hash-xyz' });</span>
<span class="cstat-no" title="statement not covered" >    return { dossier, deliverables };</span>
}</pre></td></tr></table></pre>

                <div class='push'></div><!-- for sticky footer -->
            </div><!-- /wrapper -->
            <div class='footer quiet pad2 space-top1 center small'>
                Code coverage generated by
                <a href="https://istanbul.js.org/" target="_blank" rel="noopener noreferrer">istanbul</a>
                at 2026-02-15T07:48:54.007Z
            </div>
        <script src="../prettify.js"></script>
        <script>
            window.onload = function () {
                prettyPrint();
            };
        </script>
        <script src="../sorter.js"></script>
        <script src="../block-navigation.js"></script>
    </body>
</html>
    