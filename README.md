# OpenCode Tools

**Foundry-driven autonomous engineering team orchestration for OpenCode.**

[![Version](https://img.shields.io/badge/version-1.0.0-blue.svg)](https://github.com/opencode/ai-tool)
[![License](https://img.shields.io/badge/license-MIT-green.svg)](LICENSE)

OpenCode Tools provides a multi-agent runtime that combines Foundry orchestration, Cowork plugin-based delegation, and a TUI/CLI operator interface.

## Current Status

- Foundry is now the default orchestrator agent in `opencode.json`.
- Cowork command/agent/plugin loading is integrated and test-covered.
- Quality gates run through lint/build/typecheck/tests.
- The platform is functional for development workflows, but still has open enterprise hardening items. See `docs/ENTERPRISE_GAP_BACKLOG.md`.

## Core Capabilities

- **Foundry Orchestration**: phased execution, iterative loops, peer review, and release gating.
- **Cowork Runtime**: command registry, agent registry, plugin loading, permission gates, event bus, blackboard artifacts.
- **Specialized Agents**: research, docs, architecture, codegen, QA, delivery, PDF generation.
- **Operator Interfaces**: interactive TUI and CLI commands for orchestration and plugin operations.

## Quick Start

```bash
# Install dependencies
npm install

# Build
npm run build

# Launch TUI
npm run tui

# Run Foundry orchestration from CLI
npm run build && opencode-tools orchestrate --project "MyApp"
```

Short alias is also available after global install:

```bash
oct orchestrate --project "MyApp"
```

## CLI Commands

```bash
# Foundry orchestration entry
opencode-tools orchestrate --project "MyApp" --mode full
opencode-tools orchestrate --project "MyApp" --mode research

# Interactive TUI
opencode-tools tui

# Cowork system
opencode-tools cowork list
opencode-tools cowork run <command> [args...]
opencode-tools cowork agents
opencode-tools cowork plugins

# MCP server
opencode-tools mcp

# Manual integration helper
opencode-tools integrate
```

Notes:

- `orchestrate` executes via Foundry orchestrator flow and supports `--mode research|docs|architect|code|full`.
- Mode presets currently tune iteration and quality-gate behavior (`research/docs` skip gates, `architect/code/full` run gates).
- `cowork` commands operate through loaded plugins and native agent config.
- `pdf` command now validates generated bytes and fails fast if the payload is empty or not a valid PDF header.
- Additional commands like `research`, `docs`, and `architect` exist, with depth depending on subsystem maturity.

## Development

```bash
# TypeScript build
npm run build

# TUI dev run
npm run dev

# Lint
npm run lint

# Typecheck
npx tsc --noEmit

# Full validation (lint + build + full tests)
npm run validate
```

## Testing

```bash
# Standard
npm test

# Segmented suites
npm run test:unit
npm run test:integration
npm run test:e2e
npm run test:security

# Full pipeline
npm run test:all
```

`test:security` currently runs with `--passWithNoTests`, so it exits cleanly when no dedicated security tests are present.

## Architecture Map

- CLI entry: `src/cli.ts`
- TUI entry: `src/tui-app.ts`
- Foundry runtime bridge: `src/foundry/*`
- Cowork runtime: `src/cowork/*`
- Agent implementations: `agents/*`
- MCP tool server: `tools/mcp-server.ts`

## Governance and Security

- Policy/gatekeeping: `src/governance/*`
- Review workflows: `src/review/*`
- Secret redaction: `src/security/*`
- Audit/runtime trace layers: `src/runtime/*`

## Documentation

- Developer guide: `AGENTS.md`
- Integration: `INTEGRATION_GUIDE.md`
- TUI integration notes: `TUI_INTEGRATION.md`
- Foundry implementation notes: `FOUNDRY_IMPLEMENTATION_SUMMARY.md`
- Enterprise backlog and roadmap: `docs/ENTERPRISE_GAP_BACKLOG.md`

## Contributing

1. Create a branch from `develop`.
2. Implement focused changes.
3. Run `npm run validate`.
4. Update docs for behavior changes.
5. Open PR with test evidence and risk notes.

## License

MIT - see `LICENSE`.
